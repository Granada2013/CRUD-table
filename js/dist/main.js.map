{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./js/modules/modal.js","webpack:///./js/modules/fetch_table.js","webpack:///./js/modules/post_rec.js","webpack:///./js/services/services.js","webpack:///./js/modules/edit_rec.js","webpack:///./js/script.js","webpack:///./js/modules/delete_rec.js","webpack:///./js/modules/error_screen.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","makeBtn","title","classes","newBtn","document","createElement","textContent","forEach","cls","classList","add","closeModal","modal","querySelector","item","remove","nestedForm","wrapper","newRecBtn","prepend","addEventListener","showModal","undefined","event","target","dataset","closemodal","reset","code","fetchTableRow","parentTable","args","row","arg","td","setAttribute","append","deleteBtn","editBtn","btn","addButtons","postRecord","form","url","preventDefault","obj","email","phone","website","site","company","compName","catchPhrase","compPhrase","bs","compBs","async","data","response","fetch","method","headers","body","json","postData","JSON","stringify","then","id","catch","error","alert","finally","editRecord","contains","parentRow","closest","save","toggle","toggleEditable","dataCells","children","putData","message","querySelectorAll","cell","contentEditable","server","window","table","record","replace","hidden","confirm","getElementById"],"mappings":"aACE,IAAIA,EAAmB,GAGvB,SAASC,EAAoBC,GAG5B,GAAGF,EAAiBE,GACnB,OAAOF,EAAiBE,GAAUC,QAGnC,IAAIC,EAASJ,EAAiBE,GAAY,CACzCG,EAAGH,EACHI,GAAG,EACHH,QAAS,IAUV,OANAI,EAAQL,GAAUM,KAAKJ,EAAOD,QAASC,EAAQA,EAAOD,QAASF,GAG/DG,EAAOE,GAAI,EAGJF,EAAOD,QAKfF,EAAoBQ,EAAIF,EAGxBN,EAAoBS,EAAIV,EAGxBC,EAAoBU,EAAI,SAASR,EAASS,EAAMC,GAC3CZ,EAAoBa,EAAEX,EAASS,IAClCG,OAAOC,eAAeb,EAASS,EAAM,CAAEK,YAAY,EAAMC,IAAKL,KAKhEZ,EAAoBkB,EAAI,SAAShB,GACX,oBAAXiB,QAA0BA,OAAOC,aAC1CN,OAAOC,eAAeb,EAASiB,OAAOC,YAAa,CAAEC,MAAO,WAE7DP,OAAOC,eAAeb,EAAS,aAAc,CAAEmB,OAAO,KAQvDrB,EAAoBsB,EAAI,SAASD,EAAOE,GAEvC,GADU,EAAPA,IAAUF,EAAQrB,EAAoBqB,IAC/B,EAAPE,EAAU,OAAOF,EACpB,GAAW,EAAPE,GAA8B,iBAAVF,GAAsBA,GAASA,EAAMG,WAAY,OAAOH,EAChF,IAAII,EAAKX,OAAOY,OAAO,MAGvB,GAFA1B,EAAoBkB,EAAEO,GACtBX,OAAOC,eAAeU,EAAI,UAAW,CAAET,YAAY,EAAMK,MAAOA,IACtD,EAAPE,GAA4B,iBAATF,EAAmB,IAAI,IAAIM,KAAON,EAAOrB,EAAoBU,EAAEe,EAAIE,EAAK,SAASA,GAAO,OAAON,EAAMM,IAAQC,KAAK,KAAMD,IAC9I,OAAOF,GAIRzB,EAAoB6B,EAAI,SAAS1B,GAChC,IAAIS,EAAST,GAAUA,EAAOqB,WAC7B,WAAwB,OAAOrB,EAAgB,SAC/C,WAA8B,OAAOA,GAEtC,OADAH,EAAoBU,EAAEE,EAAQ,IAAKA,GAC5BA,GAIRZ,EAAoBa,EAAI,SAASiB,EAAQC,GAAY,OAAOjB,OAAOkB,UAAUC,eAAe1B,KAAKuB,EAAQC,IAGzG/B,EAAoBkC,EAAI,GAIjBlC,EAAoBA,EAAoBmC,EAAI,G,+BChF9C,SAASC,EAAQC,KAAUC,GAChC,MAAMC,EAASC,SAASC,cAAc,UAKtC,OAJAF,EAAOG,YAAcL,EACrBC,EAAQK,QAAQC,IACdL,EAAOM,UAAUC,IAAIF,KAEhBL,EAWF,SAASQ,IACd,MAAMC,EAAQR,SAASS,cAAc,QAErC,CADkBT,SAASS,cAAc,eAC7BD,GAAOL,QAAQO,IACzBA,EAAKL,UAAUM,OAAO,gBAIX,SAASH,EAAMI,GAC5B,MAAMC,EAAUb,SAASS,cAAc,YACjCK,EAAYlB,EAAQ,iBAAkB,MAAO,eACnDiB,EAAQE,QAAQD,GAEhBA,EAAUE,iBAAiB,QAAS,MArB/B,WACL,MAAMR,EAAQR,SAASS,cAAc,QAErC,CADkBT,SAASS,cAAc,eAC7BD,GAAOL,QAAQO,IACzBA,EAAKL,UAAUC,IAAI,gBAkBnBW,GACAjB,SAASS,cAAc,eAAeO,iBAAiB,QAAS,UACtBE,IAApCC,MAAMC,OAAOC,QAAQC,aACvBf,IACAK,EAAWW,WAIfvB,SAASgB,iBAAiB,UAAYG,IACjB,WAAfA,EAAMK,OACRjB,IACAK,EAAWW,aCxCJ,SAASE,EAAcC,KAAgBC,GACpD,MAAMC,EAAM5B,SAASC,cAAc,MACnC2B,EAAIvB,UAAUC,IAAI,YAClBqB,EAAKxB,QAAQ,CAAC0B,EAAKjE,KACjB,IAAIkE,EAAK9B,SAASC,cAAc,MACtB,IAANrC,GACFkE,EAAGzB,UAAUC,IAAI,WACjBsB,EAAIG,aAAa,KAAMF,IAEvBC,EAAGzB,UAAUC,IAAI,aAEnBwB,EAAG5B,YAAc2B,EACjBD,EAAII,OAAOF,KAKb,WACE,MAAMG,EAAYrC,EAAQ,SAAU,MAAO,qBAAsB,cAC3DsC,EAAUtC,EAAQ,OAAQ,MAAO,mBAAoB,YAE3D,IAAK,IAAIuC,IAAO,CAACD,EAASD,GAAY,CACpC,IAAIH,EAAK9B,SAASC,cAAc,MAChC6B,EAAGzB,UAAUC,IAAI,eACjBwB,EAAGE,OAAOG,GACVP,EAAII,OAAOF,IAXfM,GACAV,EAAYM,OAAOJ,GCbN,SAASS,EAAWC,EAAMC,EAAKb,GAC5CY,EAAKtB,iBAAiB,SAAWG,IAC/BA,EAAMqB,iBACQxC,SAASS,cAAc,SAArC,MACMgC,EAAM,CACVtE,KAAMmE,EAAKnE,KAAKU,MAChB6D,MAAOJ,EAAKI,MAAM7D,MAClB8D,MAAOL,EAAKK,MAAM9D,MAClB+D,QAASN,EAAKO,KAAKhE,MACnBiE,QAAS,CACP3E,KAAMmE,EAAKS,SAASlE,MACpBmE,YAAaV,EAAKW,WAAWpE,MAC7BqE,GAAIZ,EAAKa,OAAOtE,SChBjBuE,eAAwBb,EAAKc,GAClC,IAAIC,QAAiBC,MAAMhB,EAAK,CAC9BiB,OAAQ,OACRC,QAAS,CACP,eAAgB,oBAElBC,KAAML,IAER,aAAaC,EAASK,QDWpBC,CAASrB,EAAKsB,KAAKC,UAAUrB,IAC1BsB,KAAKV,IACJ9C,IACAkB,EAAcC,EAAa2B,EAAKW,GAClBX,EAAKlF,KACLkF,EAAKX,MACLW,EAAKV,MACLU,EAAKT,QACLS,EAAKP,QAAQ3E,KACbkF,EAAKP,QAAQE,YACbK,EAAKP,QAAQI,MAE5Be,MAAMC,GAASC,MAAMD,IACrBE,QAAQ,IAAM9B,EAAKf,WE9BX,SAAS8C,EAAW9B,GACjCvC,SAASgB,iBAAiB,QAAUG,IAClC,IAAMA,EAAMC,OAAOf,UAAUiE,SAAS,YAAc,OAEpD,MAAMC,EAAYpD,EAAMC,OAAOoD,QAAQ,MACvC,GAAmC,QAA7BrD,EAAMC,OAAOC,QAAQoD,KACzBtD,EAAMC,OAAOlB,YAAc,OAC3BiB,EAAMC,OAAOf,UAAUqE,OAAO,eAC9BvD,EAAMC,OAAOf,UAAUqE,OAAO,eAC9BvD,EAAMC,OAAOC,QAAQoD,MAAO,EAC5BE,QAEK,CACH,MAAMC,EAAYL,EAAUM,SACtBpC,EAAM,CACVtE,KAAMyG,EAAU,GAAG1E,YACnBwC,MAAOkC,EAAU,GAAG1E,YACpByC,MAAOiC,EAAU,GAAG1E,YACpB0C,QAASgC,EAAU,GAAG1E,YACtB4C,QAAS,CACP3E,KAAMyG,EAAU,GAAG1E,YACnB8C,YAAa4B,EAAU,GAAG1E,YAC1BgD,GAAI0B,EAAU,GAAG1E,eDbtBkD,eAAuBb,EAAKc,GACjC,IAAIC,QAAiBC,MAAMhB,EAAK,CAC9BiB,OAAQ,MACRC,QAAS,CACP,eAAgB,oBAElBC,KAAML,IAER,aAAaC,EAASK,QCQhBmB,CAAQvC,EAAM,IAAIgC,EAAUP,GAAMH,KAAKC,UAAUrB,IAChDwB,MAAMC,GAASC,MAAM,QAASD,EAAMa,UAEvC5D,EAAMC,OAAOlB,YAAc,OAC3BiB,EAAMC,OAAOf,UAAUqE,OAAO,eAC9BvD,EAAMC,OAAOf,UAAUqE,OAAO,eAC9BvD,EAAMC,OAAOC,QAAQoD,MAAO,EAC5BE,IAGF,SAASA,IACeJ,EAAUS,iBAAiB,cACnC7E,QAAQ8E,IACpBA,EAAKC,gBAA2C,QAAxBD,EAAKC,qB,OCjCrC,MAAMC,EAAS,8BAEfC,OAAOpE,iBAAiB,mBAAoB,KAC1CuC,MAAM4B,GACHpB,KAAKV,GAAQA,EAAKM,QAClBI,KAAKV,IACJ,MAAMgC,EAAQrF,SAASS,cAAc,SAC/B6B,EAAOtC,SAASS,cAAc,QCd3B,IAAsB8B,EDe/Bc,EAAKlD,QAAQmF,IACX7D,EAAc4D,EAAOC,EAAOtB,GACdsB,EAAOnH,KACPmH,EAAO5C,MACP4C,EAAO3C,MAAM4C,QAAQ,MAAO,IAC5BD,EAAO1C,QACP0C,EAAOxC,QAAQ3E,KACfmH,EAAOxC,QAAQE,YACfsC,EAAOxC,QAAQI,MAE/BmC,EAAMG,QAAS,EACfhF,EAAM8B,GACND,EAAWC,EAAM6C,EAAQE,GC3BM9C,ED4BlB4C,EC3BjBnF,SAASgB,iBAAiB,QAAUG,IAC5BA,EAAMC,OAAOf,UAAUiE,SAAS,eACtBmB,QAAQ,8CAEtBlC,MAAMhB,EAAM,IAAIpB,EAAMC,OAAOoD,QAAQ,MAAMR,GAAM,CAACR,OAAQ,WACzDO,KAAKT,IACatD,SAAS0F,eAAe,GAAGvE,EAAMC,OAAOoD,QAAQ,MAAMR,IAC5DrD,aDqBb0D,EAAWc,KAEZlB,MAAMC,IE9BWlE,SAASS,cAAc,iBAC/B+E,QAAS","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","\"use strict\"\r\n\r\nexport function makeBtn(title, ...classes) {\r\n  const newBtn = document.createElement('button');\r\n  newBtn.textContent = title;\r\n  classes.forEach(cls => {\r\n    newBtn.classList.add(cls);\r\n  });\r\n  return newBtn;\r\n}\r\n\r\nexport function showModal() {\r\n  const modal = document.querySelector('.mod'),\r\n        modalBody = document.querySelector('.modal-body');\r\n  [modalBody, modal].forEach(item => {\r\n    item.classList.add('modal-show');\r\n  });\r\n}\r\n\r\nexport function closeModal() {\r\n  const modal = document.querySelector('.mod'),\r\n        modalBody = document.querySelector('.modal-body');\r\n  [modalBody, modal].forEach(item => {\r\n    item.classList.remove('modal-show');\r\n  });\r\n}\r\n\r\nexport default function modal(nestedForm) {\r\n  const wrapper = document.querySelector('.wrapper'),\r\n        newRecBtn = makeBtn('Add new record', 'btn', 'btn-primary');\r\n  wrapper.prepend(newRecBtn);\r\n\r\n  newRecBtn.addEventListener('click', () => {\r\n    showModal();\r\n    document.querySelector('.modal-body').addEventListener('click', () => {\r\n      if (event.target.dataset.closemodal !== undefined) {\r\n        closeModal();\r\n        nestedForm.reset();\r\n      };\r\n    });\r\n\r\n    document.addEventListener('keydown', (event) => {\r\n      if (event.code === 'Escape') {\r\n        closeModal();\r\n        nestedForm.reset();\r\n      }\r\n    });\r\n  })\r\n}\r\n","\"use strict\"\r\n\r\nimport {makeBtn} from './modal';\r\n\r\nexport default function fetchTableRow(parentTable, ...args) {\r\n  const row = document.createElement('tr');\r\n  row.classList.add('data-row');\r\n  args.forEach((arg, i) => {\r\n    let td = document.createElement('td');\r\n    if (i === 0) {\r\n      td.classList.add('data-id');\r\n      row.setAttribute('id', arg);\r\n    } else {\r\n      td.classList.add('data-cell');\r\n    }\r\n    td.textContent = arg;\r\n    row.append(td);\r\n  });\r\n  addButtons(parentTable);\r\n  parentTable.append(row);\r\n\r\n  function addButtons() {\r\n    const deleteBtn = makeBtn('Delete', 'btn', 'btn-outline-danger', 'btn-delete'),\r\n          editBtn = makeBtn('Edit', 'btn', 'btn-outline-dark', 'btn-edit');\r\n\r\n    for (let btn of [editBtn, deleteBtn]) {\r\n      let td = document.createElement('td');\r\n      td.classList.add('button-cell');\r\n      td.append(btn);\r\n      row.append(td);\r\n    };\r\n  }\r\n}\r\n","\"use strict\"\r\n\r\nimport {postData} from '../services/services';\r\nimport {closeModal} from './modal';\r\nimport fetchTableRow from './fetch_table';\r\n\r\nexport default function postRecord(form, url, parentTable) {\r\n  form.addEventListener('submit', (event) => {\r\n    event.preventDefault();\r\n    const table = document.querySelector('table');\r\n    const obj = {\r\n      name: form.name.value,\r\n      email: form.email.value,\r\n      phone: form.phone.value,\r\n      website: form.site.value,\r\n      company: {\r\n        name: form.compName.value,\r\n        catchPhrase: form.compPhrase.value,\r\n        bs: form.compBs.value\r\n      }\r\n    };\r\n    postData(url, JSON.stringify(obj))\r\n      .then(data => {\r\n        closeModal();\r\n        fetchTableRow(parentTable, data.id,\r\n                      data.name,\r\n                      data.email,\r\n                      data.phone,\r\n                      data.website,\r\n                      data.company.name,\r\n                      data.company.catchPhrase,\r\n                      data.company.bs);\r\n      })\r\n      .catch(error => alert(error))\r\n      .finally(() => form.reset())\r\n    });\r\n}\r\n","\"use strict\"\r\n\r\nexport async function postData(url, data) {\r\n  let response = await fetch(url, {\r\n    method: 'POST',\r\n    headers: {\r\n      \"Content-type\": 'application/json'\r\n    },\r\n    body: data\r\n  });\r\n  return await response.json();\r\n};\r\n\r\nexport async function putData(url, data) {\r\n  let response = await fetch(url, {\r\n    method: 'PUT',\r\n    headers: {\r\n      \"Content-type\": 'application/json'\r\n    },\r\n    body: data\r\n  });\r\n  return await response.json();\r\n};\r\n","\"use strict\"\r\n\r\nimport {putData} from '../services/services';\r\n\r\nexport default function editRecord(url) {\r\n  document.addEventListener('click', (event) => {\r\n    if (!(event.target.classList.contains('btn-edit'))) return;\r\n\r\n    const parentRow = event.target.closest('tr');\r\n    if (!(event.target.dataset.save == 'true')) {\r\n      event.target.textContent = 'Save'\r\n      event.target.classList.toggle('btn-warning');\r\n      event.target.classList.toggle('btn-success');\r\n      event.target.dataset.save = true;\r\n      toggleEditable();\r\n\r\n    } else {\r\n        const dataCells = parentRow.children;\r\n        const obj = {\r\n          name: dataCells[1].textContent,\r\n          email: dataCells[2].textContent,\r\n          phone: dataCells[3].textContent,\r\n          website: dataCells[4].textContent,\r\n          company: {\r\n            name: dataCells[5].textContent,\r\n            catchPhrase: dataCells[6].textContent,\r\n            bs: dataCells[7].textContent\r\n          }\r\n        }\r\n        putData(url + `/${parentRow.id}`, JSON.stringify(obj))\r\n        .catch(error => alert('oops!', error.message))\r\n\r\n      event.target.textContent = 'Edit';\r\n      event.target.classList.toggle('btn-warning');\r\n      event.target.classList.toggle('btn-success');\r\n      event.target.dataset.save = false;\r\n      toggleEditable();\r\n    };\r\n\r\n    function toggleEditable() {\r\n      const editableCells = parentRow.querySelectorAll('.data-cell');\r\n      editableCells.forEach(cell => {\r\n        cell.contentEditable = (cell.contentEditable == 'true')? false : true;\r\n      });\r\n    }\r\n  })\r\n}\r\n","\"use strict\"\r\n\r\nimport fetchTableRow from './modules/fetch_table';\r\nimport modal from './modules/modal';\r\nimport postRecord from './modules/post_rec';\r\nimport deleteRecord from './modules/delete_rec';\r\nimport editRecord from './modules/edit_rec';\r\nimport showErrorScreen from './modules/error_screen';\r\n\r\nconst server = 'http://localhost:3000/users';\r\n\r\nwindow.addEventListener('DOMContentLoaded', () => {\r\n  fetch(server)\r\n    .then(data => data.json())\r\n    .then(data => {\r\n      const table = document.querySelector('table'),\r\n            form = document.querySelector('form');\r\n      data.forEach(record => {\r\n        fetchTableRow(table, record.id,\r\n                      record.name,\r\n                      record.email,\r\n                      record.phone.replace(/\\D/g, ''),\r\n                      record.website,\r\n                      record.company.name,\r\n                      record.company.catchPhrase,\r\n                      record.company.bs)\r\n      });\r\n      table.hidden = false;\r\n      modal(form);\r\n      postRecord(form, server, table);\r\n      deleteRecord(server);\r\n      editRecord(server);\r\n  })\r\n    .catch(error => {\r\n      showErrorScreen();\r\n    })\r\n})\r\n","\"use strict\"\r\n\r\nexport default function deleteRecord(url) {\r\n  document.addEventListener('click', (event) => {\r\n    if (!(event.target.classList.contains('btn-delete'))) return;\r\n    let confirmed = confirm('Are you sure you want to delete a record?');\r\n    if (confirmed) {\r\n      fetch(url + `/${event.target.closest('tr').id}`, {method: 'DELETE'})\r\n      .then(response => {\r\n        let deletedRow = document.getElementById(`${event.target.closest('tr').id}`);\r\n        deletedRow.remove();\r\n      })\r\n    }\r\n  })\r\n}\r\n","\"use strict\"\r\n\r\nexport default function showErrorScreen() {\r\n  const errorScreen = document.querySelector('.error-screen');\r\n  errorScreen.hidden = false;\r\n}\r\n"],"sourceRoot":""}